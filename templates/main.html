<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <link type="text/css" rel="stylesheet" href="/static/css/tp/pure.css" />

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="/static/css/tp/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="/static/css/tp/grids-responsive-min.css">
    <!--<![endif]-->

    <link type="text/css" rel="stylesheet" href="/static/css/main.css" />
    <link type="text/css" rel="stylesheet" href="/static/css/stats_view.css" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <!-
    Home view
    ->
    <div id="home-view">
        <div class="fixed-width">
            <h1 class="title">Frequency Analysis</h1>
        </div>

        <div class="fixed-width">
            <div class="upload-container">

            </div>
            <div id="uploading-message">Uploading
                <div class='progress'>
                    <span style="width: 0%;"></span>
                </div>
            </div>

            <a class="center" href="/example/stats">Example</a>

        </div>
    </div>


    <!-
        Uploaded view
    ->
    <div class="fixed-width" id="everything-view" style="display: none;">
        <div>
            <h2 class="stat-title">Migraine Statistics</h2>
            <button class="pure-button" id="statistics-toggle">Statistics</button><button class="pure-button" id="events-toggle">Events</button>
        </div>
        <!-
            Stats view
        ->
        <div id="stats-view" style="display: none;">
            <div id="stat-sections-container">
                <div id="stats-loading">
                    <div>Fetching data...</div>
                    <div class='progress indefinite'>
                        <span></span>
                    </div>
                </div>
            </div>
        </div>

        <!-
            Events view
        ->

        <div id="event_list_container" style="display: none;">
            <table class="pure-table pure-table-horizontal">
                <thead>
                    <tr>
                        <th>Started</th>
                        <th>Duration</th>
                        <th>Comment</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>

    <!-
        Templates
    ->
    <script type="text/template" id="overview-view-template">
        <div class="stat-section-title">
            Overview
            <!--<span class="date-range"><%= overview.firstDate %> - <%= overview.lastDate %></span>-->
        </div>
        <div class="stat-section-item-container">
            <div class="pure-g stat-section-full-width-item">
                <div class="pure-u-1 pure-u-sm-1-3">
                    <div class="stat-section-item">
                        <div class="count"><%= overview.totalEvents %></div>
                        <div class="description-item" id="total-count-description">
                            <div>Attacks in total between <span><%= overview.firstDate %></span> and <span><%= overview.lastDate %></span>.</div>
                        </div>
                    </div>
                </div>
                <div class="pure-u-1 pure-u-sm-1-3">
                    <div class="stat-section-item">
                        <canvas class="year-trend-chart" height="200" width="100"></canvas>
                    </div>
                </div>
                <div class="pure-u-1 pure-u-sm-1-3">
                    <div class="stat-section-item">
                        <div class="description-item">
                            <div>Average of <span><%= overview.averageTimeBetweenEvent %></span> between attacks. The longest interval between attacks was <span><%= overview.longestGap %></span>, shortest <span><%= overview.shortestGap %></span>.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="pure-g stat-section-full-width-item" id="overview-trend">
            <div class="pure-u-1-1">
                <canvas class="overview-trend-chart" width="740" height="40"></canvas>
                <div class="overview-first-date"><%= overview.firstDate %></div>
                <div class="overview-last-date"><%= overview.lastDate %></div>
            </div>
        </div>
    </script>

    <script type="text/template" id="days-of-week-view-template">
        <div class="stat-section-title">
            <%= daysData.title %>
        </div>
        <div class="pure-g stat-section-full-width-item">
            <div class="pure-u-1 pure-u-sm-2-3">
                <div class="side-by-side-container">
                    <canvas class="side-by-side all-chart" height="240"></canvas>
                    <canvas style="display: none;" class="side-by-side by-year-chart" height="240"></canvas>
                </div>
                <div class="graph-mode">
                    <span class="graph-mode-all selected">all</span><span class="graph-mode-year">by year</span>
                </div>
            </div>
            <div class="pure-u-1 pure-u-sm-1-3">
                <div class="stat-section-item">
                    <div class="description-item">
                        <div>Attacks have most frequently been on a <span><%= mostFrequentText %></span>  or least frequently on a  <span><%= leastFrequentText %></span>.</div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/template" id="months-of-year-view-template">
        <div class="stat-section-title">
            <%= all.title %>
        </div>
        <div class="pure-g stat-section-full-width-item">
            <div class="pure-u-1">
                <div class="side-by-side-container">
                    <canvas class="side-by-side all-chart" height="240"></canvas>
                    <canvas style="display: none;" class="side-by-side by-year-chart" height="240"></canvas>
                </div>
                <div class="graph-mode">
                    <span class="graph-mode-all selected">all</span><span class="graph-mode-year">by year</span>
                </div>
            </div>
        </div>
    </script>

    <script type="text/template" id="radar-chart-view-template">
        <div class="stat-section-title">
            <%= title %>
        </div>
        <div class="pure-g stat-section-full-width-item">
            <div class="pure-u-1-1">
                <canvas class="radar-type-chart" width="260" height="260"></canvas>
            </div>
        </div>
    </script>

    <script type="text/template" id="event-view-template">
        <td><%= start %></td>
        <td><%= duration %></td>
        <td><%= comment %></td>
    </script>

    <script src="/static/javascript/tp/jquery-2.1.1.js" language="javascript" type="text/javascript"></script>
    <script src="/static/javascript/tp/Chart.min.js" language="javascript" type="text/javascript"></script>
    <script src="/static/javascript/tp/underscore.js" language="javascript" type="text/javascript"></script>
    <script src="/static/javascript/tp/backbone.js" language="javascript" type="text/javascript"></script>

    <script src="/static/javascript/models/event.js" language="javascript" type="text/javascript"></script>
    <script src="/static/javascript/models/events.js" language="javascript" type="text/javascript"></script>

    <script src="/static/javascript/stats_view.js" language="javascript" type="text/javascript"></script>
    <script src="/static/javascript/event_list_view.js" language="javascript" type="text/javascript"></script>
    <script src="/static/javascript/event_view.js" language="javascript" type="text/javascript"></script>
    <script src="/static/javascript/app.js" language="javascript" type="text/javascript"></script>

    <script>
        $(document).ready(function(){
            window.App = new App();

            window.App.Routes = new Workspace();

            {% if data %}
            window.App.loadData({{ data|safe }});
            {% endif %}

            Backbone.history.start({pushState: true});
        });

    </script>
</body>
</html>